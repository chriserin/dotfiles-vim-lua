# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: 3

includes:
  asdf:
    aliases: [a]
    taskfile: ./taskfiles/asdf.yml

  bat:
    taskfile: ./taskfiles/bat.yml

  brew:
    aliases: [b]
    taskfile: ./taskfiles/brew.yml

  comp:
    aliases: [c, completions]
    taskfile: ./taskfiles/completions.yml

  dot:
    taskfile: ./taskfiles/dotfiles.yml

  gh:
    aliases: [github]
    taskfile: ./taskfiles/github.yml

  nvim:
    taskfile: ./taskfiles/nvim.yml

  pnpm:
    taskfile: ./taskfiles/pnpm.yml

  python:
    taskfile: ./taskfiles/python.yml

  tmux:
    aliases: [t]
    taskfile: ./taskfiles/tmux.yml

tasks:
  default:
    cmd: task -l
    silent: true

  format:lua:check:
    desc: Runs a Lua format check using stylua
    silent: true
    cmd: stylua --allow-hidden --respect-ignores --check .

  format:lua:
    desc: Runs a Lua format using stylua
    silent: true
    cmd: stylua --allow-hidden --respect-ignores .

  install:sudo-touch-id:
    desc: Sets up touch id as sufficient sudo permission
    summary: Sets up touch id as sufficient sudo permission

      This survives OS updates after macOS Sonoma.

      Requires sudo.
    cmds:
      - sed 's/^#auth/auth/' /etc/pam.d/sudo_local.template > /etc/pam.d/sudo_local

  lint:yaml:
    desc: Runs yamllint on this repo
    cmds:
      - yamllint --strict --config-file ./config/yamllint/config .
